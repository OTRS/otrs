<?xml version="1.0" encoding="utf-8" ?>
<database Name="otrs">

    <TableAlter Name="ticket">
        <IndexCreate Name="ticket_create_time_unix">
            <IndexColumn Name="create_time_unix"/>
        </IndexCreate>
        <IndexCreate Name="ticket_until_time">
            <IndexColumn Name="until_time"/>
        </IndexCreate>
    </TableAlter>

    <TableCreate Name="virtual_fs">
        <Column Name="id" Required="true" PrimaryKey="true" AutoIncrement="true" Type="BIGINT"/>
        <Column Name="filename" Required="true" Size="350" Type="VARCHAR"/>
        <Column Name="backend" Required="true" Size="60" Type="VARCHAR"/>
        <Column Name="backend_key" Required="true" Size="160" Type="VARCHAR"/>
        <Column Name="create_time" Required="true" Type="DATE"/>
        <Index Name="virtual_fs_filename">
            <IndexColumn Name="filename" Size="350"/>
        </Index>
        <Index Name="virtual_fs_backend">
            <IndexColumn Name="backend" Size="60"/>
        </Index>
    </TableCreate>
    <TableCreate Name="virtual_fs_preferences">
        <Column Name="virtual_fs_id" Required="true" Type="BIGINT"/>
        <Column Name="preferences_key" Required="true" Size="150" Type="VARCHAR"/>
        <Column Name="preferences_value" Required="false" Size="350" Type="VARCHAR"/>
        <Index Name="virtual_fs_preferences_virtual_fs_id">
            <IndexColumn Name="virtual_fs_id"/>
        </Index>
        <ForeignKey ForeignTable="virtual_fs">
            <Reference Local="virtual_fs_id" Foreign="id"/>
        </ForeignKey>
    </TableCreate>
    <TableCreate Name="virtual_fs_db">
        <Column Name="id" Required="true" PrimaryKey="true" AutoIncrement="true" Type="BIGINT"/>
        <Column Name="filename" Required="true" Size="350" Type="VARCHAR"/>
        <Column Name="content" Required="true" Type="LONGBLOB"/>
        <Column Name="create_time" Required="true" Type="DATE"/>
        <Index Name="virtual_fs_db_filename">
            <IndexColumn Name="filename" Size="350"/>
        </Index>
    </TableCreate>

    <TableAlter Name="customer_user">
        <ColumnChange NameOld="salutation" NameNew="title" Required="false" Size="50" Type="VARCHAR"/>
        <ColumnChange NameOld="login" NameNew="login" Required="true" Size="200" Type="VARCHAR"/>
        <ColumnChange NameOld="customer_id" NameNew="customer_id" Required="true" Size="150" Type="VARCHAR"/>
        <ColumnChange NameOld="zip" NameNew="zip" Required="false" Size="200" Type="VARCHAR"/>
        <ColumnChange NameOld="city" NameNew="city" Required="false" Size="200" Type="VARCHAR"/>
        <ColumnChange NameOld="country" NameNew="country" Required="false" Size="200" Type="VARCHAR"/>
    </TableAlter>

    <TableAlter Name="users">
        <ColumnChange NameOld="salutation" NameNew="title" Required="false" Size="50" Type="VARCHAR"/>
        <ColumnChange NameOld="login" NameNew="login" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>

    <TableAlter Name="valid">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="ticket_priority">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="ticket_type">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="ticket_lock_type">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="groups">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="roles">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="ticket_state">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="ticket_state_type">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="salutation">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="signature">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="system_address">
        <ColumnChange NameOld="comments" NameNew="comments" Required="false" Size="250" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="follow_up_possible">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="queue">
        <ColumnChange NameOld="comments" NameNew="comments" Required="false" Size="250" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="ticket_history_type">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="article_type">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="article_sender_type">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="standard_response">
        <ColumnChange NameOld="comments" NameNew="comments" Required="false" Size="250" Type="VARCHAR"/>
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="standard_attachment">
        <ColumnChange NameOld="comments" NameNew="comments" Required="false" Size="250" Type="VARCHAR"/>
        <ColumnChange NameOld="content_type" NameNew="content_type" Required="true" Size="250" Type="VARCHAR"/>
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="auto_response_type">
        <ColumnChange NameOld="comments" NameNew="comments" Required="false" Size="250" Type="VARCHAR"/>
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="auto_response">
        <ColumnChange NameOld="comments" NameNew="comments" Required="false" Size="250" Type="VARCHAR"/>
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="service">
        <ColumnChange NameOld="comments" NameNew="comments" Required="false" Size="250" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="service_customer_user">
        <ColumnChange NameOld="customer_user_login" NameNew="customer_user_login" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="sla">
        <ColumnChange NameOld="comments" NameNew="comments" Required="false" Size="250" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="customer_company">
        <ColumnChange NameOld="customer_id" NameNew="customer_id" Required="true" Size="150" Type="VARCHAR"/>
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="notification_event">
        <ColumnChange NameOld="content_type" NameNew="content_type" Required="true" Size="250" Type="VARCHAR"/>
        <ColumnAdd Name="comments" Required="false" Size="250" Type="VARCHAR"/>
    </TableAlter>
    <TableAlter Name="package_repository">
        <ColumnChange NameOld="name" NameNew="name" Required="true" Size="200" Type="VARCHAR"/>
    </TableAlter>

    <TableAlter Name="article_attachment">
        <ColumnChange NameOld="content_type" NameNew="content_type" Required="false" Size="450" Type="VARCHAR"/>
    </TableAlter>

</database>
